<h1>タスク一覧</h1>

<%= link_to '新規投稿', new_task_path %>
<% if params[:sort_expired] %>
	<%= link_to '登録日時で並び替え', tasks_path %>
<% else %>
	<%= link_to '終了期限で並び替え', tasks_path(sort_expired:"true") %>
<% end %>

<%= search_form_for @q, url: tasks_path do |f| %>
	<%= f.label :name_cont, 'タスク名検索' %>
	<%= f.search_field :name_cont, placeholder: '検索するテキストを入力...' %>
	<%= f.radio_button :state_eq, 0 %><%= t'.waiting' %>
	<%= f.radio_button :state_eq, 1 %><%= t'.working' %>
	<%= f.radio_button :state_eq, 2 %><%= t'.done' %>
	<%= f.submit 'Search' %><%= link_to 'Clear', tasks_path %>
<% end %>

<table>
	<thead>
		<tr>
			<th>タスク名</th>
			<th>詳細</th>
			<th>進捗</th>
			<th>登録日時</th>
			<th>期限</th>
		</tr>
	</thead>
	<% @tasks.each do |f| %>
		<tbody>
			<tr>
				<td><%= f.name %></td>
				<td><%= f.description %></td>
				<td><%= f.state %></td>
				<td><%= f.created_at %></td>
				<td><%= f.expired_at %></td>
				<td><%= link_to t('.edit'), edit_task_path(f) %></td>
				<td><%= link_to t('.show'), f %></td>
				<td><%= link_to t('.destroy'), f, method: :delete, data: { confrim: '削除しますか？'} %></td>
			</tr>
		</tbody>
	<% end %>
</table>